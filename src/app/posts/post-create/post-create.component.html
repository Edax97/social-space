<mat-spinner *ngIf="isLoading"></mat-spinner>

<mat-card *ngIf="(mode !== 'notFound' && !isLoading)">
  <form [formGroup]="form" (submit)="onSavePost()">
    <mat-form-field>
      <input matInput type="text" formControlName="title" placeholder="Post Title" 
      required>
      <mat-error>
        Please enter a title.
      </mat-error>
    </mat-form-field>
    <div class= 'align'>
      <button mat-stroked-button type="button" (click)="filepicker.click()">Pick image</button>
      <input type="file" #filepicker (change)="onFileSelected($event)">
    </div>
    <div class= 'preview-image align' *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid">
      <img class='shadow-box' [src]="imagePreview" [alt]="form.value.image.name">
    </div>
    <div class="align" *ngIf="form.get('image').invalid"><p class='alert'>Invalid file type!</p></div>
    <mat-form-field>
      <textarea matInput rows="6"
        formControlName='content' placeholder="Post body" 
        required></textarea>
      <mat-error>
        Please enter a body
      </mat-error>
    </mat-form-field> 
    <br>
    <div class = 'buttons'>
      <button mat-stroked-button color="warn" type="button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button class="save" type="submit"
      color="primary">{{ mode === 'create'? 'New': 'Update'}} post</button>
    </div>
    
  </form>
</mat-card>

<mat-card class='not-found' *ngIf="(mode === 'notFound' && !isLoading)">
  <h2>Post not found!</h2>
</mat-card>
